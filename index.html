<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TriniBos1 Wiki</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS for the cool UI with Green, Black, Red */
        :root {
            --primary-bg: #1a1a1a; /* Dark Black */
            --secondary-bg: #2a2a2a; /* Slightly lighter black for sections */
            --text-color: #e0e0e0; /* Light grey for readability */
            --highlight-green: #00ff00; /* Vibrant Green */
            --accent-red: #ff4d4d; /* Noticeable Red */
            --border-color: #333;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--primary-bg);
            color: var(--text-color);
            display: flex;
            min-height: 100vh; /* Ensures full height */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        .container {
            display: flex;
            width: 100%;
        }

        /* Sidebar Styling */
        .sidebar {
            width: 280px; /* Fixed width for sidebar */
            background-color: var(--secondary-bg);
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5); /* Subtle shadow */
            display: flex;
            flex-direction: column;
            position: sticky; /* Make sidebar sticky */
            top: 0;
            height: 100vh; /* Full height */
            overflow-y: auto; /* Allow scrolling for long navigation */
            border-right: 1px solid var(--border-color);
        }

        .wiki-title {
            color: var(--highlight-green);
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.8em;
            border-bottom: 2px solid var(--highlight-green);
            padding-bottom: 10px;
        }

        .main-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .main-nav li {
            margin-bottom: 10px;
            position: relative; /* Crucial for positioning the dropdown */
        }

        .main-nav a {
            display: block;
            padding: 10px 15px;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease, color 0.3s ease;
            cursor: pointer; /* Indicate it's interactive */
        }

        .main-nav a:hover,
        .main-nav a.active {
            background-color: var(--highlight-green);
            color: var(--primary-bg); /* Dark text on green hover */
        }

        /* Dropdown specific styles */
        .sub-nav {
            list-style: none;
            padding: 0; /* Remove padding-left from parent */
            margin: 0;
            position: absolute; /* Position relative to parent li */
            top: 100%; /* Position below the parent link */
            left: 0;
            background-color: var(--secondary-bg); /* Background for dropdown */
            min-width: 100%; /* Ensure it's at least as wide as parent */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7); /* Dropdown shadow */
            border-radius: 5px;
            z-index: 10; /* Ensure it appears above other content */
            display: none; /* Hidden by default */
            border: 1px solid var(--border-color);
            overflow: hidden; /* For rounded corners */
        }

        .has-dropdown:hover > .sub-nav {
            display: block; /* Show on hover of the parent li */
        }

        .sub-nav .sub-link {
            font-size: 0.9em;
            padding: 8px 15px; /* Adjust padding for sub-links */
            background-color: transparent; /* Start transparent */
            color: var(--text-color);
        }

        .sub-nav .sub-link:hover {
            background-color: var(--highlight-green);
            color: var(--primary-bg);
        }

        /* Ensure the dropdown trigger doesn't have a blue link underline */
        .dropdown-trigger {
            text-decoration: none !important; /* Override default link underline */
        }

        /* Adjust active state for dropdown trigger if a sub-link is active */
        .has-dropdown .dropdown-trigger.active {
            background-color: var(--highlight-green);
            color: var(--primary-bg);
        }

        /* Main Content Styling */
        .content {
            flex-grow: 1; /* Takes remaining space */
            padding: 30px;
            background-color: var(--primary-bg);
            overflow-y: auto; /* Allow content to scroll */
        }

        .content h1, .content h2, .content h3, .content h4 {
            color: var(--highlight-green);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .content h1 { font-size: 2.5em; border-bottom: 2px solid var(--highlight-green); }
        .content h2 { font-size: 2em; }
        .content h3 { font-size: 1.5em; }

        .content p {
            line-height: 1.6;
            margin-bottom: 1em;
        }

        .content ul {
            list-style-type: disc;
            margin-left: 20px;
            margin-bottom: 1em;
        }

        .content ul li {
            margin-bottom: 0.5em;
        }

        .content ol {
            margin-left: 20px;
            margin-bottom: 1em;
        }

        .content ol li {
            margin-bottom: 0.5em;
        }

        .content pre {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            color: var(--text-color);
        }

        .content code {
            background-color: rgba(0, 255, 0, 0.1);
            color: var(--highlight-green);
            padding: 2px 5px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1em;
        }

        .content table th,
        .content table td {
            border: 1px solid var(--border-color);
            padding: 8px;
            text-align: left;
        }

        .content table th {
            background-color: var(--highlight-green);
            color: var(--primary-bg);
        }

        .content a:not(.nav-link) { /* Style for links within content */
            color: var(--highlight-green);
            text-decoration: underline;
        }

        .content a:not(.nav-link):hover {
            color: var(--accent-red);
        }

        /* Specific styling for warnings/notes (using red accent) */
        .content .note, .content .important {
            background-color: rgba(255, 77, 77, 0.1); /* Light red tint */
            border-left: 5px solid var(--accent-red);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .content .note h3, .content .important h3 {
            color: var(--accent-red);
            margin-top: 0;
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h1 class="wiki-title">TriniBos1 Wiki</h1>
            <nav class="main-nav">
                <ul>
                    <li><a href="#home" class="nav-link active">Home</a></li>
                    <li class="has-dropdown"> <a class="nav-link dropdown-trigger">Projects</a> <ul class="sub-nav">
                            <li><a href="#trkey-keymap-configurator" class="nav-link sub-link">TrkEy Keymap Configurator</a></li>
                            </ul>
                    </li>
                    <li><a href="#about" class="nav-link">About TriniBos1 Wiki</a></li>
                    <li><a href="#contact" class="nav-link">Contact</a></li>
                </ul>
            </nav>
        </aside>

        <main class="content" id="wiki-content">
            <div style="text-align: center; padding: 50px;">
                <h2 style="color: var(--highlight-green);">Loading content...</h2>
                <p>Please wait while we fetch the page.</p>
            </div>
        </main>
    </div>

    <script>
        // JavaScript for Dynamic Content Loading from Google Docs (Published to Web)
        // IMPORTANT: Each Google Doc MUST be published to the web (File > Share > Publish to web)
        // and you must use the generated '/pub' URL.
        const wikiPageUrls = {
            'home': 'https://docs.google.com/document/d/e/2PACX-1vR_YOUR_HOME_DOC_ID/pub', // REPLACE WITH YOUR ACTUAL PUBLISHED GOOGLE DOC URL
            'trkey-keymap-configurator': 'https://docs.google.com/document/d/e/2PACX-1vTKMlVJdMZLpRsVtcrg6x9wskp-McY6Q6vDAvlvV20Fn8Gb9KBUH_iA2MlFVidENjDLBiynX8yYUmYE/pub', // REPLACED WITH THE PROVIDED PUBLISHED GOOGLE DOC URL
            'about': 'https://docs.google.com/document/d/e/2PACX-1vR_YOUR_ABOUT_DOC_ID/pub', // REPLACE WITH YOUR ACTUAL PUBLISHED GOOGLE DOC URL
            'contact': 'https://docs.google.com/document/d/e/2PACX-1vR_YOUR_CONTACT_DOC_ID/pub', // REPLACE WITH YOUR ACTUAL PUBLISHED GOOGLE DOC URL
            // To add a new page:
            // 1. Publish your Google Doc to the web (File > Share > Publish to web).
            // 2. Copy the "Link" provided (it will end with /pub).
            // 3. Add a new key (e.g., 'new-page-id') and its corresponding /pub URL here.
            //    Example: 'my-new-project': 'https://docs.google.com/document/d/e/2PACX-1vR_YOUR_NEW_PROJECT_DOC_ID/pub',
        };

        // --- Core Logic ---
        const wikiContentDiv = document.getElementById('wiki-content');
        // Select all nav links that have an href, excluding the dropdown trigger
        const navLinks = document.querySelectorAll('.main-nav a[href^="#"]');
        
        let currentPageId = 'home'; // Default page

        // Function to load content from a URL
        async function loadContent(pageId) {
            const url = wikiPageUrls[pageId];

            if (!url || url.includes('YOUR_')) { // Check if URL is placeholder
                wikiContentDiv.innerHTML = `
                    <h1 style="color: var(--accent-red);">Page Not Found / URL Placeholder</h1>
                    <p>The content for "${pageId}" is not available or its Google Doc URL is a placeholder (e.g., 'YOUR_HOME_DOC_ID').</p>
                    <p>Please ensure you have published your Google Doc to the web and updated the <code>wikiPageUrls</code> object in the script with the correct <code>/pub</code> URL for this page.</p>
                    <p>Navigate to a different page or update the code.</p>
                `;
                console.warn(`URL for page "${pageId}" not found or is a placeholder in wikiPageUrls.`);
                return;
            }

            wikiContentDiv.innerHTML = `
                <div style="text-align: center; padding: 50px;">
                    <h2 style="color: var(--highlight-green);">Loading content...</h2>
                    <p>Please wait while we fetch the page from Google Docs.</p>
                </div>
            `; // Loading indicator

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status} for ${url}`);
                }
                const htmlContent = await response.text();

                // Google Docs published HTML includes <head> and <body> tags.
                // We want to extract only the content within the <body> to avoid conflicts.
                const parser = new DOMParser();
                const doc = parser.parseFromString(htmlContent, 'text/html');
                const bodyContent = doc.body.innerHTML;

                wikiContentDiv.innerHTML = bodyContent;
                currentPageId = pageId;
                window.location.hash = `#${pageId}`;

            } catch (error) {
                console.error('Failed to load content from Google Doc:', error);
                wikiContentDiv.innerHTML = `
                    <h1 style="color: var(--accent-red);">Error Loading Page</h1>
                    <p>Could not retrieve content from Google Docs for "${pageId}".</p>
                    <p>Please ensure the Google Doc is published to the web and the URL is correct.</p>
                    <p>Error details: ${error.message}</p>
                `;
            }

            // Update active state in navigation
            navLinks.forEach(link => {
                if (link.getAttribute('href') === `#${pageId}`) {
                    link.classList.add('active');
                    const parentLi = link.closest('li');
                    if (parentLi && parentLi.parentElement.classList.contains('sub-nav')) {
                         parentLi.parentElement.previousElementSibling.classList.add('active'); // Activate the 'Projects' dropdown trigger
                    }
                } else {
                    link.classList.remove('active');
                    // Also ensure parent 'Projects' link is deactivated if no sub-link is active
                    const parentLi = link.closest('li');
                    if (parentLi && parentLi.parentElement.classList.contains('sub-nav')) {
                        const projectsTrigger = parentLi.parentElement.previousElementSibling;
                        if (projectsTrigger && projectsTrigger.classList.contains('dropdown-trigger')) {
                            let anySubLinkActive = false;
                            parentLi.parentElement.querySelectorAll('.sub-link').forEach(sub => {
                                if (sub.classList.contains('active')) {
                                    anySubLinkActive = true;
                                }
                            });
                            if (!anySubLinkActive) {
                                projectsTrigger.classList.remove('active');
                            }
                        }
                    }
                }
            });
        }

        // Event listener for navigation clicks
        navLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault(); // Prevent default link behavior
                const pageId = link.getAttribute('href').substring(1); // Get page ID from href (e.g., "home")
                loadContent(pageId);
            });
        });

        // Handle initial page load and hash changes
        function handleInitialLoad() {
            // Load page based on URL hash, or default to 'home'
            const initialPageId = window.location.hash ? window.location.hash.substring(1) : 'home';
            loadContent(initialPageId);
        }

        // Listen for hash changes (e.g., if someone manually changes #home to #about)
        window.addEventListener('hashchange', () => {
            const newPageId = window.location.hash ? window.location.hash.substring(1) : 'home';
            if (newPageId !== currentPageId) { // Only reload if it's a different page
                loadContent(newPageId);
            }
        });

        // Run on page load
        document.addEventListener('DOMContentLoaded', handleInitialLoad);
    </script>
</body>
</html>
